---
description: Problem Analysis & Solution Discovery Rule (Not in fixing BUGS in code)
alwaysApply: true
---

# Problem Analysis & Solution Discovery Rule

**GOAL:** Research deeply, analyze thoroughly, provide evidence-based solutions for non-bug problems.
**WHEN TO USE:** "How to solve X?", "What should I do?", Exploring options, Architectural decisions.
**CORE PRINCIPLE:** Never guess. Research depth matches problem complexity.

---

## STEP 0: ASSESS COMPLEXITY

**Decision Tree:**
- Straightforward "how to"? → **LIGHT WORKFLOW**
- Known solution pattern? → **LIGHT WORKFLOW**
- Architectural decision? → **DEEP WORKFLOW**
- Multi-component scope? → **DEEP WORKFLOW**
- Vague/Exploratory? → **DEEP WORKFLOW**
- Uncertain? → Start **LIGHT**, escalate if needed.

**Criteria:**
- **Simple:** Single component, known pattern, low risk.
- **Complex:** Multi-component, novel/unclear, high impact.

---

## LIGHT WORKFLOW (Simple)
**Use:** Clear request, known patterns, low risk.
1. **Quick Check:** Core question? Do I know the answer?
2. **Minimal Research:** 1-2 tools max (`exa_get_code_context` for docs/patterns, `brave/exa_web_search` for general).
3. **Direct Solution:** 1 recommended approach, brief explanation, steps.
4. **Quick Validation:** Verify/guide implementation.

---

## DEEP WORKFLOW (Complex)
**Use:** High risk, unclear requirements, architectural decisions.

### PHASE 1: PLAN & UNDERSTAND
- **Plan:** `sequential-thinking` (map knowledge needs).
- **Multi-Source Research:**
  - General: `brave/exa_web_search`.
  - Deep Content: `exa_web_crawl` (top URLs).
  - Docs: `mcp_context7`.
  - Code/Repo: `octocode_githubSearchCode`, `githubViewRepoStructure`.
  - Strategy: Broad → Deep → Technical → Validate → Synthesize.

### PHASE 2: DISCOVER ALTERNATIVES
- **Goal:** 2-3 distinct approaches.
- **Document:** Description, Pros/Cons, Complexity, Timeline, Dependencies.

### PHASE 3: EVALUATE & DECIDE
- **Criteria:** Performance, Maintainability, Time, Cost (weighted).
- **Score:** Use `sequential-thinking` for comparison matrix.
- **Recommend:** Best option with reasoning, confidence, and risks.

### PHASE 4: VALIDATE & PLAN
- **Confirm:** Summarize understanding.
- **Plan:** Immediate/Short-term/Medium-term steps.
- **Success:** Metrics and Verification methods.

---

## RESPONSE TEMPLATE (Flexible)

```markdown
## EXECUTIVE SUMMARY
[Problem + Solution + Insight]

## PROBLEM ANALYSIS
[Context & Constraints]

## RESEARCH INSIGHTS
- [Source]: [Findings]

## SOLUTION OPTIONS
### Option 1: [Name]
**Description:** ... | **Pros/Cons:** ... | **Complexity:** ...

## EVALUATION & RECOMMENDATION
| Option | Crit 1 | Crit 2 | Score |
|--------|--------|--------|-------|
**RECOMMENDED:** [Option]
**WHY:** [Reasoning]

## IMPLEMENTATION ROADMAP
**Immediate:** ...
**Short-term:** ...
```

---

## VALIDATION CHECKLIST
**Light:** Complexity assessed Simple, Minimal research (1-2 sources), Direct solution.
**Deep:** Complexity assessed Complex, Research (3+ sources), Alternatives (2-3), Evidence-based Rec, Plan & Metrics.

---

## MCP TOOL QUICK REFERENCE

| Task | Tool | Light | Deep |
|---|---|---|---|
| Plan | `sequential-thinking` | Brief | Detailed |
| Research | `brave/exa_web_search` | ✓ | ✓ |
| Deep Content | `exa_web_crawl` | ✗ | ✓ |
| Docs/Patterns | `exa_get_code_context` | ✓ | ✓ |
| GitHub | `octocode_*` | ✗ | ✓ |

**Context:** Light = ~80% saved. Deep = Comprehensive.

---

## TL;DR - RULE SUMMARY
1. **ASSESS** complexity (Simple vs Complex).
2. **CHOOSE**:
   - **LIGHT**: 1-2 tools, direct answer.
   - **DEEP**: 3+ tools, alternatives, comprehensive analysis.
3. **EXECUTE** & Validate.
**Remember:** Match effort to complexity. Research smart.